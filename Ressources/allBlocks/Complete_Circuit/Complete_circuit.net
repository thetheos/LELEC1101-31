* C:\Users\guill\Programmes\LELEC1101-31\Ressources\allBlocks\Complete_Circuit\Complete_circuit.asc
XU1 VF1 0 V++ V-- VS1 TL084
XU2 N005 N001 V++ V-- VDiff TL084
R1 N001 VS2 10k
R2 N005 VS1 10k
R3 VDiff N001 10k
R4 N005 0 10k
XU4 N027 N028 VDP2 opamp Aol=100K GBW=100Meg
C2 N028 0 {C}
R9 N028 VF2 {1/{2*pi*fo*C}}
R10 N027 VF2 10k
R11 VDP2 N027 10k
V8 V++ 0 15
V9 V-- 0 -15
B1 P001 0 V=(white(2e6*time)/10)
V12 IN1 P001 SINE(0 1 4000 0 0 0)
V14 IN2 P002 SINE(0 1 4000 0 0 -70)
B2 P002 0 V=(white(2e6*time)/10)
XU6 VDP2 0 V++ V-- VS2 TL084
XU8 0 N002 V++ V-- VDCOFF TL084
R18 N002 Vdirdiff 10k
R19 N002 N009 10k
R20 0 N009 10k
R21 N009 V-- 5k
R22 VDCOFF N002 1.866k
J1 N006 N004 0 NJF
R13 V++ N006 14k
V1 N004 0 SINE(0 0.1 3000 0 0 -60)
C7 N006 N007 2.2�
J2 N023 N018 0 NJF
R24 V++ N023 14k
V2 N018 0 SINE(0 0.1 3000 0 0 0)
C8 N023 N024 2.2�
XU9 N015 Vdirdiff V++ V-- Vdirdiff TL084
C9 N015 0 1000n
R26 N022 VDCOFF 14k
D5 VDCOFF N026 1N4148
D6 N026 VDCOFF 1N4148
D7 N020 N021 1N4148
D8 N021 N022 1N4148
D9 N014 N013 1N4148
D10 N022 N014 1N4148
R27 N013 VDCOFF 10k
R28 N022 N026 33k
XU10 0 N022 V++ V-- Vasin TL084
R29 Vasin N022 75k
R7 Vlp N015 22k
XU11 N008 N003 V++ V-- VF2 TL084
R25 N003 VF2 4k
R30 0 N003 1.1k
R31 N010 IN2 5.1k
R32 VF2 N010 5.1k
C6 N008 N010 10n
R33 0 N008 5.1k
C10 0 N008 10n
XU12 N019 N016 V++ V-- VF1 TL084
R34 N016 VF1 4k
R35 0 N016 1.1k
R36 N025 IN1 5.1k
R37 VF1 N025 5.1k
C11 N019 N025 10n
R38 0 N019 5.1k
C12 0 N019 10n
R5 N020 VDCOFF 10k
R6 N011 VDiff 100k
XU3 0 N011 V++ V-- N017 TL084
R8 N012 N011 100k
D11 N017 N012 D
XU5 N012 Vlp V++ V-- Vlp TL084
.model D D
.lib C:\Users\guill\Documents\LTspiceXVII\lib\cmp\standard.dio
.model NJF NJF
.model PJF PJF
.lib C:\Users\guill\Documents\LTspiceXVII\lib\cmp\standard.jft
* Saturation comparator
* Differential Amplifier
* pi half Phase shifter
.param C=4.7n fo=4k
.inc opamp.sub
.include ../TL084.lib
.tran 0 1 0 1m
* Filter
* Mic. input
* Opamp voltage
* Rectifier and low pass filter
* DC offset (sum op-amp)
* Direction and angle
* Description:\nINPUT: Two square signals dephased of pi/2.\nOUTPUT: A DC voltage between [V--/2;V++/2] proportional to sin(phi) \n                (Phi is the phase difference between the two input signals)\n \nDetailed explanation:\nThe first differential amplifier substract the two input signals.\nThis output is rectified and goes straight to a low-pass filter to get the average (dc component)\nTo center the voltage around 0V (if DC < V++/2 then the voltage is negative\nThe differential voltage after the low pass filter go through a differential opamp to set voltage refference back to ground\nWe use a summing opamp. In wich we sum a constant dc offset via the voltage divider
* Rectifier
* Low pass filter
.include ../LM311.301
* Micros
* Emitter
* Integrator
* Schmitt trigger
* Amplifier and Speaker
* Oscillator
* Arcsinus
.backanno
.end
