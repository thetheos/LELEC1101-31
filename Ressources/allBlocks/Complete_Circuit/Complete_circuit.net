* Z:\home\thetheos\Documents\Université\BAC2\Q4.P_Elec\Ressources\allBlocks\Complete_Circuit\Complete_circuit.asc
XU1 VF1 0 V++ V-- VS1 TL084
XU2 N006 N001 V++ V-- VDiff TL084
R1 N001 VS2 10k
R2 N006 VS1 10k
R3 VDiff N001 10k
R4 N006 0 10k
XU4 N026 N027 VDP2 opamp Aol=100K GBW=100Meg
C2 N027 0 {C}
R9 N027 VF2 {1/{2*pi*fo*C}}
R10 N026 VF2 10k
R11 VDP2 N026 10k
V8 V++ 0 15
V9 V-- 0 -15
B1 P001 0 V=(white(2e6*time)/10)
V12 IN1 P001 SINE(0 1 4000 0 0 0)
V14 IN2 P002 SINE(0 1 4000 0 0 -70)
B2 P002 0 V=(white(2e6*time)/10)
XU6 VDP2 0 V++ V-- VS2 TL084
D1 Vdir- VDiff 1N4148
D2 VDiff N013 1N4148
D3 Vdir- 0 1N4148
D4 0 N013 1N4148
XU7 N007 N003 V++ V-- Vdirdiff TL084
R16 Vdirdiff N003 10k
R17 N003 Vdir+ 10k
R14 N007 Vdir- 10k
XU8 0 N002 V++ V-- VDCOFF TL084
R18 N002 Vdirdiff 10k
R19 N002 N011 10k
R20 0 N011 100k
R21 N011 V++ 68k
R22 VDCOFF N002 1.866k
J1 N008 N005 0 NJF
R13 V++ N008 14k
V1 N005 0 SINE(0 0.1 3000 0 0 -60)
C7 N008 N009 2.2ï¿½
J2 N022 N020 0 NJF
R24 V++ N022 14k
V2 N020 0 SINE(0 0.1 3000 0 0 0)
C8 N022 N023 2.2ï¿½
R15 N007 0 10k
XU9 N016 Vdir+ V++ V-- Vdir+ TL084
C9 N016 Vdir- 1000n
R23 N013 Vdir- 20k
R26 N019 VDCOFF 10k
D5 VDCOFF N025 1N4148
D6 N025 VDCOFF 1N4148
D7 VDCOFF N018 1N4148
D8 N018 N019 1N4148
D9 N015 N014 1N4148
D10 N019 N015 1N4148
R27 N014 VDCOFF 4k
R28 N019 N025 65k
XU10 0 N019 V++ V-- Vasin TL084
R29 Vasin N019 35k
R7 N013 N016 22k
XU11 N010 N004 V++ V-- VF2 TL084
R25 N004 VF2 4k
R30 0 N004 1.1k
R31 N012 IN2 5.1k
R32 VF2 N012 5.1k
C6 N010 N012 10n
R33 0 N010 5.1k
C10 0 N010 10n
XU12 N021 N017 V++ V-- VF1 TL084
R34 N017 VF1 4k
R35 0 N017 1.1k
R36 N024 IN1 5.1k
R37 VF1 N024 5.1k
C11 N021 N024 10n
R38 0 N021 5.1k
C12 0 N021 10n
.model D D
.lib C:\users\thetheos\My Documents\LTspiceXVII\lib\cmp\standard.dio
.model NJF NJF
.model PJF PJF
.lib C:\users\thetheos\My Documents\LTspiceXVII\lib\cmp\standard.jft
* Saturation comparator
* Differential Amplifier
* pi half Phase shifter
.param C=4.7n fo=4k
.inc opamp.sub
.include ../TL084.lib
.tran 0 1 0 1m
* Filter
* Mic. input
* Opamp voltage
* Rectifier and low pass filter
* Differential amplifier
* DC offset (sum op-amp)
* Direction and angle
* Description:\nINPUT: Two square signals dephased of pi/2.\nOUTPUT: A DC voltage between [V--/2;V++/2] proportional to sin(phi) \n                (Phi is the phase difference between the two input signals)\n \nDetailed explanation:\nThe first differential amplifier substract the two input signals.\nThis output is rectified and goes straight to a low-pass filter to get the average (dc component)\nTo center the voltage around 0V (if DC < V++/2 then the voltage is negative\nThe differential voltage after the low pass filter go through a differential opamp to set voltage refference back to ground\nWe use a summing opamp. In wich we sum a constant dc offset via the voltage divider
* Rectifier
* Low pass filter
.include ../LM311.301
* Micros
* Emitter
* Integrator
* Schmitt trigger
* Amplifier and Speaker
* Oscillator
* Arcsinus
.backanno
.end
